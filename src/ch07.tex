%------------------------------------------------------------
\title[07 - 循环与分支综合]
{07 - 循环与分支综合}

\subtitle{C++ 程序设计基础}

\author[Beiyu Li]
{Beiyu Li\\
\texttt{<sysulby@gmail.com>}}

% \institute[SOJ]
% {Sicily Online Judge}

\date[\today]
{\number\year 年 \number\month 月 \number\day 日}
%------------------------------------------------------------


\begin{document}

\author[sysulby]
{SOJ 信息学竞赛教练组}

\begin{frame}
    \titlepage
\end{frame}
\setcounter{framenumber}{0} % 标题页不编号


\section{复习回顾}

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{分支结构}

    \begin{columns}[T]
        \column{.58\textwidth}
        \begin{overlayarea}{\textwidth}{.6\textheight}
            \begin{itemize}[<+->]
                \item 根据不同情况，执行不同的语句

                    \begin{itemize}
                        \item 单分支
                        \item 双分支
                        \item 多分支
                        \item 分支嵌套
                    \end{itemize}

            \end{itemize}
        \end{overlayarea}

        \column{.42\textwidth}
        \only<2>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=if]{ch04/if.cc}}
        \only<3>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=if_else]{ch04/if_else.cc}}
        \only<4>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=if_else_if]{ch04/if_else_if.cc}}
        \only<5>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=if_nest]{ch04/if_nest.cc}}
    \end{columns}
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{问题回顾：闰年判断}

    \alt<2-2>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=leap2]{ch04/leap2.cc}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 闰年分为世纪闰年和普通闰年。普通闰年的年份是 $4$ 的倍数，且不是 $100$ 的倍数；世纪闰年的年份是 $400$ 的倍数。\\
                    输入一个整数 $year$ ($1000 \le year \le 3000$)，表示一个年份，判断该年份是否为闰年，输出对应的判断结果。

                \item 样例输入

                    \lstinline|2010|

                \item 样例输出

                    \lstinline|2010 is not a leap year|

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{循环结构}

    \begin{itemize}
        \item<1-> \lstinline|while| 循环：先判断再执行

            \only<1> {
                \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=while]{ch05/while.cc}
            }

        \item<2-> \lstinline|do...while| 循环：先执行再判断，至少执行一次

            \only<2> {
                \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=do_while]{ch05/do_while.cc}
            }

        \item<3-> \lstinline|for| 循环：执行初始动作后，先判断再执行

            \only<3> {
                \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for]{ch06/for.cc}
            }

    \end{itemize}
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{问题回顾：输出从 1 到 n 的整数之和}

    \alt<2>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for_sum_1_to_n]{ch06/for_sum_1_to_n.cc}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 输入一个整数 $n$ ($1 \le n \le 1000$)，输出从 $1$ 到 $n$ 之间的整数之和。

                \item 样例输入

                    \lstinline|5|

                \item 样例输出

                    \lstinline|15|

                \item 样例说明

                    $1+2+3+4+5=15$

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------


\section{for 循环嵌套分支}

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{例 7.1：加减数列求和}

    \alt<2>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=alt_sum]{ch07/alt_sum.cc}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 输入一个整数 $n$ ($1 \le n \le 1000$)，输出 $1 - 2 + 3 - 4 + 5 - \dots$，一直到 $n$ 的和。

                \item 样例输入

                    \lstinline|7|

                \item 样例输出

                    \lstinline|4|

                \item 样例说明

                    $1 - 2 + 3 - 4 + 5 - 6 + 7 = 4$

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{例 7.2：优秀学生}

    \alt<2-9>{
        \begin{columns}
            \column{.01\textwidth}

            \column{.63\textwidth}
            \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=student]{ch07/student.cc}

            \column{.36\textwidth}
            \begin{itemize}
                    \uncover<3-> {
                    \item 允许边输入边输出

                    \item<4-> 运行窗口\\

                        \uncover<5->{\lstinline|2|\\}
                        \uncover<6->{\lstinline|98 92|\\}
                        \uncover<7->{\lstinline|Good Job|\\}
                        \uncover<8->{\lstinline|80 95|\\}
                        \uncover<9->{\lstinline|Fighting|}
                    }
            \end{itemize}
        \end{columns}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 输入一个整数 $n$ ($1 \le n \le 1000$)，表示有 $n$ 个学生。接下来输入每个学生的语文成绩 $x$ ($1 \le x \le 100$) 和数学成绩 $y$ ($1 \le y \le 100$)。\\
                    对于每个学生，如果其两科成绩均不低于 $90$ 分，则输出 Good Job，否则输出 Fighting。

                \item 样例输入

                    \lstinline|2|\\
                    \lstinline|98 92|\\
                    \lstinline|80 95|

                \item 样例输出

                    \lstinline|Good Job|\\
                    \lstinline|Fighting|


            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{例 7.3：输出 n 的所有因子}

    \alt<2-3>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=factors]{ch07/factors.cc}
        \begin{tikzpicture}[remember picture,overlay]
            \uncover<3>{\redbox{factors}{9}{9}{9}{18};}
        \end{tikzpicture}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 输入一个整数 $n$ ($1 \le n \le 1000$)，输出 $n$ 的所有因子。

                \item 样例输入

                    \lstinline|8|

                \item 样例输出

                    \lstinline|1 2 4 8|

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{例 7.4：求 n 的所有因子之和}

    \alt<2-3>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=factors_sum]{ch07/factors_sum.cc}

        \begin{tikzpicture}[remember picture,overlay]
            \uncover<3>{\redbox{factors_sum}{11}{7}{11}{15};}
        \end{tikzpicture}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 输入一个整数 $n$ ($1 \le n \le 1000$)，求 $n$ 的所有因子之和。

                \item 样例输入

                    \lstinline|8|

                \item 样例输出

                    \lstinline|15|

                \item 样例说明

                    $1+2+4+8=15$

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{例 7.5：求 n 个数的最大值}

    \alt<2-8>{
        \alt<7-8> {
            \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for_max_x]{ch07/for_max_x.cc}

            \begin{itemize}
                \item<8> 把擂主的初始值设置为最小值，确保第一个挑战者攻擂成功
            \end{itemize}

            \begin{tikzpicture}[remember picture,overlay]
                \uncover<8>{\redbox{for_max_x}{8}{3}{8}{25};}
                \uncover<8>{\redbox{for_max_x}{11}{9}{11}{16};}
            \end{tikzpicture}
        }{
            \begin{itemize}
                \item 打擂台找最大值
            \end{itemize}				

            \vspace*{1ex}
            \centering
            \begin{tikzpicture}[node distance=1.25cm]
                \node (start) [process] {8};
                \node (second) [process, right of=start, xshift = 1.5cm] {7};
                \node (third) [process, right of=second, xshift = 1.5cm] {9};
                \node (stop) [process, right of=third, xshift = 1.5cm] {5};
                \only<2>{\node (max) [startstop, below of=second, xshift = 1.4cm] {擂主};}
                \only<3-4>{\node (max1) [startstop, below of=second, xshift = 1.4cm] {擂主: 8};}
                \only<5-6>{\node (max2) [startstop, below of=second, xshift = 1.4cm] {擂主: 9};}

                \only<3>{\draw [arrow] (start) --  node[left, xshift = -0.3cm] {攻擂成功} (max1);}
                \only<4>{\draw [arrow] (second) --  node[left, xshift = -0.1cm] {攻擂失败} (max1);}
                \only<5>{\draw [arrow] (third) -- node[left, xshift = -0.1cm] {攻擂成功} (max2);}
                \only<6>{\draw [arrow] (stop) --  node[left, xshift=-0.3cm] {攻擂失败} (max2);}
            \end{tikzpicture}	
        }
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 第一行输入一个整数 $n$ ($1 \le n \le 1000$)，第二行输入 $n$ 个整数 $x$ ($-10^9 \le x \le 10^9$)，求这 $n$ 个整数中的最大值。

                \item 样例输入

                    \lstinline|4|\\
                    \lstinline|8 7 9 5|

                \item 样例输出

                    \lstinline|9|

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{例 7.6：求 n 个数的最大值及位置}

    \alt<2-3>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for_max_x_with_pos]{ch07/for_max_x_with_pos.cc}

        \begin{tikzpicture}[remember picture,overlay]
            \uncover<3>{\redbox{for_max_x_with_pos}{9}{27}{9}{34};}
            \uncover<3>{\redbox{for_max_x_with_pos}{14}{7}{14}{14};}
        \end{tikzpicture}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 第一行输入一个整数 $n$ ($1 \le n \le 1000$)，第二行输入 $n$ 个整数 $x$ ($-10^9 \le x \le 10^9$)，求这 $n$ 个整数中的最大值及位置（保证最大值是唯一的）。

                \item 样例输入

                    \lstinline|4|\\
                    \lstinline|8 7 9 5|

                \item 样例输出

                    \lstinline|9 3|

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------


\section{while/do..while 循环嵌套分支}

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{问题回顾：反向输出非负整数}

    \alt<2-3>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=output_digits]{ch07/output_digits.cc}

        \begin{tikzpicture}[remember picture,overlay]
            \uncover<3>{\redbox{output_digits}{9}{13}{9}{18};}
            \uncover<3>{\redbox{output_digits}{10}{5}{10}{12};}
        \end{tikzpicture}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 输入一个整数 $n$ ($1 \le n \le 10^9$)，请从低位到高位输出 $n$ 的每个数位。

                \item 样例输入

                    \lstinline|856|

                \item 样例输出

                    \lstinline|6 5 8|

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{例 7.7：统计数位中 3 的个数}

    \alt<2-3>{
        \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=num_of_digit_3]{ch07/num_of_digit_3.cc}

        \begin{tikzpicture}[remember picture,overlay]
            \uncover<3>{\redbox{num_of_digit_3}{10}{9}{10}{19};}
            \uncover<3>{\redbox{num_of_digit_3}{13}{5}{13}{12};}
        \end{tikzpicture}
    }{
        \begin{exampleblock}{编程题}

            \begin{itemize}
                \item 输入一个整数 $n$ ($1 \le n \le 10^9$)，统计 $n$ 的数位中 $3$ 的个数。

                \item 样例输入

                    \lstinline|1353|

                \item 样例输出

                    \lstinline|2|

            \end{itemize}

        \end{exampleblock}
    }
\end{frame}
%------------------------------------------------------------


\section{break 和 continue 语句}

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{break 和 continue 语句}

    \begin{itemize}
        \item \lstinline|break|：用于循环体中，表示跳出本层循环
    \end{itemize}

    \begin{columns}[T]
        \column{.04\textwidth}

        \column{.43\textwidth}
        \uncover<1-4>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=while_break]{ch07/while_break.cc}}

        \column{.53\textwidth}
        \uncover<3-4>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for_break]{ch07/for_break.cc}}
    \end{columns}

    \begin{tikzpicture}[remember picture,overlay]
        \uncover<2->{\redbox{while_break}{4}{5}{4}{10};}
        \uncover<2->{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-while_break-4-end) -- ++(2em, 0) |- ([shift={(2pt, .25em)}] pic cs:line-while_break-7-end);}
        \uncover<4>{\redbox{for_break}{4}{5}{4}{10};}
        \uncover<4>{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-for_break-4-end) -- ++(2em, 0) |- ([shift={(2pt, .25em)}] pic cs:line-for_break-7-end);}
    \end{tikzpicture}
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{break 和 continue 语句}

    \begin{itemize}
        \item \lstinline|continue|：用于循环体中，表示跳过本次循环（循环体）中余下未执行的语句，进行下一次循环
    \end{itemize}

    \begin{columns}[T]
        \column{.04\textwidth}

        \column{.43\textwidth}
        \uncover<1-4>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=while_continue]{ch07/while_continue.cc}}

        \column{.53\textwidth}
        \uncover<3-4>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for_continue]{ch07/for_continue.cc}}
    \end{columns}

    \begin{tikzpicture}[remember picture,overlay]
        \uncover<2->{\redbox{while_continue}{4}{5}{4}{13};}
        \uncover<2->{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-while_continue-4-end) -- ++(2em, 0) |- ([shift={(2pt, .25em)}] pic cs:line-while_continue-1-end);}
        \uncover<4>{\redbox{for_continue}{4}{5}{4}{13};}
        \uncover<4>{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-for_continue-4-end) -| ([shift={(-.8cm, -.2em)}] pic cs:line-for_continue-1-end);}
    \end{tikzpicture}
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{break 语句 - 示例}

    \begin{itemize}
        \item 输入一个整数 $n$ ($1 \le n \le 1000$)，输出 $1 \sim n$ 中的每个整数，增加判断当这个数为 $5$ 时，使用 \lstinline|break| 语句，观察输出结果。
    \end{itemize}

    \begin{columns}[T]
        \column{.04\textwidth}

        \column{.43\textwidth}
        \uncover<2-5>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=while_1_n_break]{ch07/while_1_n_break.cc}}

        \column{.53\textwidth}
        \uncover<4-5>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for_1_n_break]{ch07/for_1_n_break.cc}}
    \end{columns}

    \begin{tikzpicture}[remember picture,overlay]
        \uncover<3->{\redbox{while_1_n_break}{6}{5}{6}{10};}
        \uncover<3->{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-while_1_n_break-6-end) -- ++(5em, 0) |- ([shift={(2pt, .25em)}] pic cs:line-while_1_n_break-10-end);}
        \uncover<5>{\redbox{for_1_n_break}{5}{5}{5}{10};}
        \uncover<5>{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-for_1_n_break-5-end) -- ++(5em, 0) |- ([shift={(2pt, .25em)}] pic cs:line-for_1_n_break-8-end);}
    \end{tikzpicture}
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{continue 语句 - 示例}

    \begin{itemize}
        \item 输入一个整数 $n$ ($1 \le n \le 1000$)，输出 $1 \sim n$ 中的每个整数，增加判断当这个数为 $5$ 时，使用 \lstinline|continue| 语句，观察输出结果。
    \end{itemize}

    \begin{columns}[T]
        \column{.04\textwidth}

        \column{.43\textwidth}
        \uncover<2-5>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=while_1_n_continue]{ch07/while_1_n_continue.cc}}

        \column{.53\textwidth}
        \uncover<4-5>{\lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=for_1_n_continue]{ch07/for_1_n_continue.cc}}
    \end{columns}

    \begin{tikzpicture}[remember picture,overlay]
        \uncover<3->{\redbox{while_1_n_continue}{6}{5}{6}{13};}
        \uncover<3->{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-while_1_n_continue-6-end) -- ++(3em, 0) |- ([shift={(2pt, .25em)}] pic cs:line-while_1_n_continue-4-end);}
        \uncover<5>{\redbox{for_1_n_continue}{5}{5}{5}{13};}
        \uncover<5>{\draw[red, very thick, ->] ([shift={(2pt, .25em)}] pic cs:line-for_1_n_continue-5-end) -| ([shift={(-.8cm, -.2em)}] pic cs:line-for_1_n_continue-3-end);}
    \end{tikzpicture}
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{break 和 continue 语句}

    \begin{itemize}
        \item<1-> \lstinline|break|

            \begin{itemize}
                \item 在 \lstinline|while| 循环中，直接跳出本层 \lstinline|while| 循环
                \item 在 \lstinline|for| 循环中，直接跳出本层 \lstinline|for| 循环
            \end{itemize}

        \item<2-> \lstinline|continue|

            \begin{itemize}
                \item 在 \lstinline|while| 循环中，直接跳转到\textbf{条件语句}，需要额外注意
                \item 在 \lstinline|for| 循环中，直接跳转到每次循环后的动作
            \end{itemize}

    \end{itemize}
\end{frame}
%------------------------------------------------------------

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{随堂练习}

    \begin{exampleblock}{填空题}

        \begin{enumerate}
            \item 阅读程序写结果
                \lstinputlisting[basicstyle=\ttfamily\scriptsize,language=C++,name=exercise]{ch07/exercise.cc}

                \vspace{.8ex}
                \small{输入：}\lstinline|7 12|\\
                \small{输出：}\uncover<2->{\textcolor{red}{\lstinline|7 8 9|}}
        \end{enumerate}

    \end{exampleblock}
\end{frame}
%------------------------------------------------------------


\section{总结}

%------------------------------------------------------------
\begin{frame}[fragile]
    \frametitle{总结}

    \begin{itemize}
        \item 循环与分支综合
            \begin{itemize}
                \item 求和问题
                \item 计数问题
                \item 最值问题
                \item 数位拆分
            \end{itemize}
        \item \lstinline|break| 和 \lstinline|continue| 语句
    \end{itemize}
\end{frame}
%------------------------------------------------------------

%---------------------------------------------------------
\begin{frame}
    \begin{center}
        {\Huge Thank you!}
    \end{center}
\end{frame}
%---------------------------------------------------------

\end{document}
